# mixinglayer.inp
# Written by Ramanathan Vishnampet

# Filenames, etc.
output_prefix = "MixingLayer"
grid_file = "MixingLayer.xyz"
initial_condition_file = "MixingLayer.ic.q"
boundary_condition_file = "bc.dat"
target_state_file = "MixingLayer.target.q"
decomposition_map_file = "decomp.map"

# Grid information
nx = 513
ny = 257
#nz = 128
xmin_interior = 0
xmax_interior = 120
ymin_interior =-30
ymax_interior = 30
xmin_outer = -40
xmax_outer = 160
ymin_outer = -50
ymax_outer = 50
#zmin = -25.0
#zmax = 25.0
stretch_y = true

# Periodicity
#grid001/dir3/periodicity_type = 'PLANE'
#grid001/dir3/periodic_length = 50.0

# Simulation flags
include_viscous_terms = true
use_constant_CFL_mode = true
use_target_state = true
curvilinear_domain = false
compute_time_average = false
use_manual_domain_decomposition = false

# Non-dimensional constants
Reynolds_number = 200.0
Prandtl_number = 0.7
Schmidt_number_1 = 0.7
Schmidt_number_2 = 0.7
viscosity_power_law_exponent = 0.666
bulk_viscosity_ratio = 0.6
ratio_of_specific_heats = 1.4

# Chemistry
number_of_species = 2
number_of_reactions = 1
initial_fuel_mass_fraction = 1.0
initial_oxidizer_mass_fraction = 0.233
stoichiometric_ratio = 8.0
heat_release = 0.86
Zel_Dovich = 6.0
Damkohler_number = 50000.0

# Discretization scheme
defaults/discretization_scheme = "SBP 4-8"

# Time stepping options
time_step_size = 0.01
cfl = 0.3
number_of_timesteps = 100000
report_interval = 1
save_interval = 2000

# Artificial dissipation
add_dissipation = true
dissipation_amount = 0.01

# Solution limits
enable_solution_limits = true
minimum_density = 0.01
minimum_temperature = 0.05
maximum_density = 10.
maximum_temperature = 100.
minimum_massFraction = -0.1
maximum_massFraction = 1.1

# Damping
defaults/sponge_amount = 0.5
defaults/viscous_penalty_amount = 0.

# Mixing layer velocity
upper_velocity = 0.6
lower_velocity = 0.1

# Inflow excitation
patches/excitationSupport/number_of_modes = 8
patches/excitationSupport/origin_x = -10.
patches/excitationSupport/velocity_x = 0.35
patches/excitationSupport/amplitude = 0.008
patches/excitationSupport/frequency = 0.128
patches/excitationSupport/radius = 4.7434164902525691
patches/excitationSupport/random_seed = 685785

# Localized ignition
patches/localizedIgnition/amplitude = 2.0
patches/localizedIgnition/radius = 0.25
patches/localizedIgnition/origin_x = 8.0
patches/localizedIgnition/time_start = 0.6
patches/localizedIgnition/time_duration = 0.1

# Adjoint optimization flags
disable_adjoint_solver = false
baseline_prediction_available = false
cost_functional_type = "TEMPERATURE"
controller_type = "FLAME_IGNITION"
use_continuous_adjoint = true
number_of_control_iterations = 0