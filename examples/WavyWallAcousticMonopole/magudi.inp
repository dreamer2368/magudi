# magudi.inp
# Written by Ramanathan Vishnampet

# Filenames, etc.
output_prefix = "WavyWallAcousticMonopole"
grid_file = "WavyWallAcousticMonopole.xyz"
boundary_condition_file = "WavyWallAcousticMonopole_bc.dat"
initial_condition_file = "WavyWallAcousticMonopole.ic.q"
control_mollifier_file = "WavyWallAcousticMonopole.control_mollifier.f"
target_mollifier_file = "WavyWallAcousticMonopole.target_mollifier.f"

#we are using ambient pressure so I compare my pressure field to a constant
mean_pressure_file = "WavyWallAcousticMonopole.ambient_pressure.f"

curvilinear_domain = true

# Simulation flags
use_constant_CFL_mode = false
use_target_state = true
include_viscous_terms = false

# Physical constants
Reynolds_number = 750.

# Adjoint optimization flags
disable_adjoint_solver = false
baseline_prediction_available = false
cost_functional_type = "SOUND"
controller_type="PASSIVE_WALL_ACTUATOR"
use_continuous_adjoint = false
gradient_buffer_size = 20

# Gradient accuracy options
check_gradient_accuracy = true
precision_for_gradient_accuracy = 1e-15
number_of_control_iterations = 32
initial_actuation_amount = 200.
restart_control_iteration = 0
actuation_amount_geometric_growth = 0.5623413251903491

# Discretization scheme
defaults/discretization_scheme = "SBP 3-6"

# Time stepping options
time_integration_scheme = 'RK4'
time_step_size = 0.002
number_of_timesteps = 700
report_interval = 1
save_interval = 25

# Artificial dissipation
add_dissipation = true
dissipation_amount = 0.001

# Solution limits
enable_solution_limits = true
minimum_density = 0.1
minimum_temperature = 0.05
maximum_density = 5.
maximum_temperature = 4.

# Acoustic source
number_of_acoustic_sources = 1
acoustic_source01/amplitude =2.
acoustic_source01/frequency = 4.77464829275686
acoustic_source01/y = 0.4
acoustic_source01/x = 0.5
acoustic_source01/radius = 0.1

#Random Fluctuating Field
random_fluctuation_source/amplitude=1.e-6

# Periodicity
#grid001/dir1/periodicity_type = 'PLANE'
#grid001/dir1/periodic_length = 1.

# Damping
defaults/sponge_amount = 0.5

# Penalty parameters
defaults/inviscid_penalty_amount = 1.
compute_time_average = false
